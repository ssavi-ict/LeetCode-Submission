{"id":689226676,"lang":"cpp","lang_name":"C++","time":"7 months, 4 weeks","timestamp":1651168248,"status":10,"status_display":"Accepted","runtime":"4 ms","url":"/submissions/detail/689226676/","is_pending":"Not Pending","title":"Basic Calculator III","memory":"6.6 MB","code":"class Solution {\npublic:\n    unordered_map<char, int> signedPrior;\n    \n    long long strToNum(string &s, int l, int r)\n    {\n        long long num = 0;\n        for(int i=l ; i<=r ; i++){\n            long long digit = s[i] - '0';\n            num *= 10;\n            num += digit;\n        }\n        return num;\n    }\n    \n    long long FuN(string &s, int l, int r)\n    {\n        long long partitionIdx = 1e9, mnPrior = 1e9, openBracket = 0, num = 0;\n        for(int i=l ; i<=r ; i++){\n            if(s[i] >= '0' && s[i] <= '9'){\n                continue;\n            }\n            else if(s[i] == '(')\n                openBracket++;\n            else if(s[i] == ')')\n                openBracket--;\n            else if(!openBracket){\n                if(signedPrior[s[i]] <= mnPrior){\n                    mnPrior = signedPrior[s[i]];\n                    partitionIdx = i;\n                }\n            }\n        }\n        //cout<<l<<' '<<r<<' '<<mnPrior<<' '<<partitionIdx<<endl;\n        \n        if(mnPrior == 1e9 && s[l] == '(' && s[r] == ')')\n            return FuN(s, l+1, r-1);\n        else if(mnPrior == 1e9)\n            return strToNum(s, l, r);\n        else{\n            long ret1 = FuN(s, l, partitionIdx-1);\n            long ret2 = FuN(s, partitionIdx+1, r);\n            if(mnPrior == 1)\n                return ret1 + ret2;\n            else if(mnPrior == 2)\n                return ret1 - ret2;\n            else if(mnPrior == 3)\n                return ret1 / ret2;\n            else\n                return ret1 * ret2;\n        }\n    }\n    \n    int calculate(string s) {\n        int n = s.size();\n        signedPrior['+'] = 1;\n        signedPrior['-'] = 2;\n        signedPrior['/'] = 3;\n        signedPrior['*'] = 4;\n        return FuN(s, 0, n-1);\n    }\n};","compare_result":"111111111111111111111111111111111111111111111111111111111111111111111111111111","title_slug":"basic-calculator-iii","has_notes":false,"notes":"","topic_tags":[]}